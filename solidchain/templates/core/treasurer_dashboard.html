{% extends 'base.html' %}

{% block title %}Treasurer Dashboard - SolidChain{% endblock %}
{% load humanize %}
{% block content %}
<!-- Header -->
<div class="card-mobile mb-4">
    <div class="card-body-mobile">
        <div class="d-flex align-items-center justify-content-between">
            <div>
                <h1 class="h4 fw-bold mb-1">Treasurer Dashboard</h1>
                <p class="text-muted mb-0 text-small-mobile">
                    <i class="bi bi-shield-check me-1"></i>
                    Admin controls for group contributions
                </p>
            </div>
            <div class="text-end">
                <span class="badge bg-danger p-2">
                    <i class="bi bi-person-badge me-1"></i>
                    Treasurer Access
                </span>
            </div>
        </div>
    </div>
</div>

<!-- Quick Stats -->
<div class="row g-2 mb-4">
    <div class="col-6">
        <div class="stat-card-mobile">
            <div class="stat-number text-primary">{{ total_members }}</div>
            <div class="stat-label">Total Members</div>
        </div>
    </div>
    <div class="col-6">
        <div class="stat-card-mobile">
            <div class="stat-number text-success">{{ paid_count }}</div>
            <div class="stat-label">Paid This Month</div>
        </div>
    </div>
    <div class="col-6">
        <div class="stat-card-mobile">
            <div class="stat-number text-warning">{{ pending_count }}</div>
            <div class="stat-label">Pending</div>
        </div>
    </div>
    <div class="col-6">
        <div class="stat-card-mobile">
            <div class="stat-number text-danger">KSh {{ current_fines|floatformat:0|intcomma }}</div>
            <div class="stat-label">Fines This Month</div>
        </div>
    </div>
</div>
<div class="card-mobile mb-4">
    <div class="card-header-mobile">
        <i class="bi bi-bar-chart me-2"></i>
        Financial Reports
    </div>
    <div class="card-body-mobile">
        <p class="text-muted text-small-mobile mb-3">
            Generate detailed financial reports and member statements
        </p>
        <div class="d-grid gap-2">
            <a href="{% url 'reports:dashboard' %}" class="btn btn-primary-mobile btn-mobile">
                <i class="bi bi-bar-chart"></i>
                Go to Reports Dashboard
            </a>
            <a href="{% url 'reports:monthly_report' %}" class="btn btn-outline-primary btn-mobile">
                <i class="bi bi-calendar-check"></i>
                Monthly Collection Report
            </a>
        </div>
    </div>
</div>
<!-- Current Month Status -->
<div class="card-mobile mb-4">
    <div class="card-header-mobile">
        <i class="bi bi-calendar-month me-2"></i>
        {{ current_month }} - Collection Status
    </div>
    <div class="card-body-mobile">
        <div class="mb-3">
            <div class="d-flex justify-content-between mb-1">
                <span class="text-small-mobile">Collection Rate</span>
                <span class="text-small-mobile fw-bold">{{ collection_rate|floatformat:0 }}%</span>
            </div>
            <div class="progress-mobile">
                <div class="progress-bar-mobile bg-primary" style="width: {{ collection_rate }}%"></div>
            </div>
        </div>
        
        <div class="row text-center g-3">
            <div class="col-4">
                <div class="p-2 bg-light rounded">
                    <div class="fw-bold">{{ total_members }}</div>
                    <div class="text-tiny-mobile text-muted">Total</div>
                </div>
            </div>
            <div class="col-4">
                <div class="p-2 bg-success bg-opacity-10 rounded">
                    <div class="fw-bold text-success">{{ paid_count }}</div>
                    <div class="text-tiny-mobile text-success">Paid</div>
                </div>
            </div>
            <div class="col-4">
                <div class="p-2 bg-warning bg-opacity-10 rounded">
                    <div class="fw-bold text-warning">{{ pending_count }}</div>
                    <div class="text-tiny-mobile text-warning">Pending</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card-mobile mb-4">
    <div class="card-header-mobile">
        <i class="bi bi-lightning me-2"></i>
        Quick Actions
    </div>
    <div class="card-body-mobile">
        <div class="d-grid gap-2">
            <a href="{% url 'core:payment_entry' %}" class="btn btn-primary-mobile btn-mobile">
                <i class="bi bi-plus-circle"></i>
                Record New Payment
            </a>
            
            <a href="/admin/core/payment/add/" class="btn btn-outline-primary btn-mobile">
                <i class="bi bi-gear"></i>
                Advanced Admin Panel
            </a>
            
            <a href="/admin/core/member/" class="btn btn-outline-secondary btn-mobile">
                <i class="bi bi-people"></i>
                Manage Members
            </a>
        </div>
    </div>
</div>

<!-- System Info -->
<div class="card-mobile">
    <div class="card-header-mobile">
        <i class="bi bi-info-circle me-2"></i>
        System Information
    </div>
    <div class="card-body-mobile">
        <div class="list-group list-group-flush">
            <div class="list-group-item border-0 px-0 py-2">
                <div class="row">
                    <div class="col-6">
                        <div class="text-muted text-small-mobile">Fine Rules</div>
                    </div>
                    <div class="col-6 text-end">
                        <span class="badge bg-danger">6th-10th: KSh 100/day</span><br>
                        <span class="badge bg-warning mt-1">11th+: KSh 25/day</span>
                    </div>
                </div>
            </div>
            
            <div class="list-group-item border-0 px-0 py-2">
                <div class="row">
                    <div class="col-6">
                        <div class="text-muted text-small-mobile">Monthly Amount</div>
                    </div>
                    <div class="col-6 text-end">
                        <span class="fw-bold">KSh 2,500</span>
                    </div>
                </div>
            </div>
            
            <div class="list-group-item border-0 px-0 py-2">
                <div class="row">
                    <div class="col-6">
                        <div class="text-muted text-small-mobile">Due Date</div>
                    </div>
                    <div class="col-6 text-end">
                        <span class="fw-bold">5th of every month</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Back to Member View -->
<div class="d-grid gap-2 mt-4">
    <a href="{% url 'core:dashboard' %}" class="btn btn-outline-secondary btn-mobile">
        <i class="bi bi-arrow-left"></i>
        Back to Member Dashboard
    </a>
</div>
{% endblock %}